# COCi 리뉴얼
[github](https://github.com/sw-corini/COCi-Movie-Crawler)
---
## - 2019.05.06
 중요한 것은 *Crawler*를 다시 만드는 것이다. 지금 1차 버전에서는 매일 0시마다 내 윈도우 데스크탑에서 *forever*로 돌고 있다. 잘 돌아가고 있지만 문제는 그 윈도우 데스크탑이 가끔씩 집에 상주하시는 고양님의 터치로 꺼질 때가 있다는 것. 그때마다 수동으로 다시 켜긴 했지만 요즘 같은 시대에 개발자로 밥 벌어먹고 살면서 이게 뭐하는 짓인가 싶었다. 그래서 사실 리뉴얼을 할 것이 아니라해도 이 망할 크롤러는 손을 봤어야 했다.

 *AWS 서비스*를 이용해보기로 했다. 그리고 기존 데스크탑의 크롤러가 돌고나서 영화 정보를 업데이트하는 firestore도 걷어내고 AWS에 통합하기로 했다. 사실 이전에 서버리스 람다를 이용해서 해보려다 바쁜 일에 치이고 헤매면서 중도 포기를 했었다. 그러던 와중에 리뉴얼을 앞두고 AWS cloud9을 알게되었고 그래서 진행중인 COCi new Crawler는 cloud9+lambda+SQS+dynamoDB+cloudWatch 조합이 될 것 같다.

## - 2019.05.20
 이것저것 할 일도 많고 바빠서 가끔씩 들여다 보기만 하다가 오늘에야 진행상황을 정리해둔다. 5월 6일부터 진행 시작했던 소스가 너무 이런 저런 시도를 많이 해보다 엉망진창이 되어 이참에 오픈소스로 다시 작업을 하려고 깃을 새로 파서 작업하고 있다. 
 
  우선 오늘까지 완료된 사항을 정리하자면 다음과 같다.
1. cloud9(싱가포르 리전)에 lambda 함수 생성
2. 네이버 개봉예정작 목록에서 영화 코드를 긁어 SQS 대기열에 메시지 추가
3. 텔레그램 채널에 개봉예정작 SQS 대기열 등록 완료 메시지 출력
4. SQS 대기열에서 메시지 읽기 (코드)
5. 읽어들인 코드로 영화 상세 정보 긁어오기

 아직까지는 크게 거슬리는 소스 없이 진행되고 있다. 이제 내일은 긁어온 영화 상세 정보를 dynamoDB에 등록하는 작업을 완료할 계획이다.

